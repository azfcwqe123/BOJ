<img width="1663" height="1313" alt="image" src="https://github.com/user-attachments/assets/ed19c935-39bc-415b-bb69-83ffe55b7e93" />

문제: https://www.acmicpc.net/problem/2504

---

### Hint

<img width="447" height="517" alt="image" src="https://github.com/user-attachments/assets/bceb757b-a071-4ab2-9c67-63f0d63a5da0" />

---

스택, 수학

```java
import java.util.*;
import java.io.*;

class Main {

    static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    static StringTokenizer st;
    public static void main(String[] args) throws IOException {
        
        String str = br.readLine();
        Stack<Character> stack = new Stack<>();
        int ans = 0, tmp = 1;

        for(int i=0; i<str.length(); i++) {
            char x = str.charAt(i);

            if(x == '(') {
                tmp *= 2;
                stack.push(x);
            }
            else if(x == '[') {
                tmp *= 3;
                stack.push(x);
            }

            else if(x == ')') {
                // 스택이 비어있거나, 스택의 첫번째 요소가 괄호 불일치라면
                if(stack.isEmpty() || stack.peek() != '(') {
                    ans = 0; // 올바르지 않은 괄호
                    break;
                }

                // 덧셈을 해야할 차례라면
                if(str.charAt(i-1) == '(') ans += tmp;

                stack.pop();
                tmp /= 2;
            }

            else if(x == ']') {
                // 스택이 비어있거나, 스택의 첫번째 요소가 괄호 불일치라면
                if(stack.isEmpty() || stack.peek() != '[') {
                    ans = 0; // 올바르지 않은 괄호 
                    break;
                }

                // 덧셈을 해야할 차례라면
                if(str.charAt(i-1) == '[') ans += tmp;

                stack.pop();
                tmp /= 3;
            }
        }
        
        // 스택이 비어있으면 올바르지 않은 괄호, 그렇지 않다면 올바른 괄호
        System.out.println((!stack.isEmpty()) ? 0 : ans);
        
    }    
}

```